# NOTE when redirecting to folder, always include trailing slash
# NOTE first segment will always have trailing slash at this point

# == Latest version redirects

set $latest_anypoint_platform_pcf '1.6';
set $latest_api_manager '2.x';
set $latest_apikit '4.x';
set $latest_connector_devkit '3.9';
set $latest_healthcare_toolkit '3.1';
set $latest_mule_management_console '3.8';
set $latest_mule_runtime '3.9';
set $latest_mule4_runtime '4.1';
set $latest_mule_sdk '1.1';
set $latest_munit '2.1';
set $latest_private_cloud '2.0';
set $latest_runtime_fabric '1.0';
set $latest_studio '7.2';

location = /anypoint-platform-pcf/ { return 302 /anypoint-platform-pcf/latest/; }
location ^~ /anypoint-platform-pcf/latest/ { rewrite ^/(anypoint-platform-pcf)/latest/(.*)$ /$1/$latest_anypoint_platform_pcf/$2; }
location = /api-manager/ { return 302 /api-manager/latest/; }
location ^~ /api-manager/latest/ { rewrite ^/(api-manager)/latest/(.*)$ /$1/$latest_api_manager/$2; }
location = /apikit/ { return 302 /apikit/latest/; }
location ^~ /apikit/latest/ { rewrite ^/(apikit)/latest/(.*)$ /$1/$latest_apikit/$2; }
location = /connector-devkit/ { return 302 /connector-devkit/latest/; }
location ^~ /connector-devkit/latest/ { rewrite ^/(connector-devkit)/latest/(.*)$ /$1/$latest_connector_devkit/$2; }
location = /healthcare-toolkit/ { return 302 /healthcare-toolkit/latest/; }
location ^~ /healthcare-toolkit/latest/ { rewrite ^/(healthcare-toolkit)/latest/(.*)$ /$1/$latest_healthcare_toolkit/$2; }
location = /mule-management-console/ { return 302 /mule-management-console/latest/; }
location ^~ /mule-management-console/latest/ { rewrite ^/(mule-management-console)/latest/(.*)$ /$1/$latest_mule_management_console/$2; }
location = /mule-runtime/ { return 302 /mule-runtime/latest/; }
location ^~ /mule-runtime/latest/ { rewrite ^/(mule-runtime)/latest/(.*)$ /$1/$latest_mule_runtime/$2; }
#location = /mule4-runtime/ { return 302 /mule4-runtime/latest/; }
#location ^~ /mule4-runtime/latest/ { rewrite ^/(mule4-runtime)/latest/(.*)$ /$1/$latest_mule4_runtime/$2; }
location = /mule-sdk/ { return 302 /mule-sdk/latest/; }
location ^~ /mule-sdk/latest/ { rewrite ^/(mule-sdk)/latest/(.*)$ /$1/$latest_mule_sdk/$2; }
location = /munit/ { return 302 /munit/latest/; }
location ^~ /munit/latest/ { rewrite ^/(munit)/latest/(.*)$ /$1/$latest_munit/$2; }
location = /private-cloud/ { return 302 /private-cloud/latest/; }
location ^~ /private-cloud/latest/ { rewrite ^/(private-cloud)/latest/(.*)$ /$1/$latest_private_cloud/$2; }
location = /runtime-fabric/ { return 302 /runtime-fabric/latest/; }
location ^~ /runtime-fabric/latest/ { rewrite ^/(runtime-fabric)/latest/(.*)$ /$1/$latest_runtime_fabric/$2; }
location = /studio/ { return 302 /studio/latest/; }
location ^~ /studio/latest/ { rewrite ^/(studio)/latest/(.*)$ /$1/$latest_studio/$2; }

# QUESTION could we put other legacy paths inside this location?
# == /v folder in second segment

location ~ ^(?:/[^/]+)/v(?:/|$) {
  # == Archived Versions

  rewrite ^/(anypoint-connector-devkit)/v/(3.[234])(?:|/(.*))$ https://docs.archive.mulesoft.com/$1/v/$2/$3 permanent;
  rewrite ^/(healthcare-toolkit)/v/(1\.3)(?:|/(.*))$ https://docs.archive.mulesoft.com/$1/v/$2/$3 permanent;
  rewrite ^/(mule-contributors-guide)/v/(3\.[34])(?:|/(.*))$ https://docs.archive.mulesoft.com/$1/v/$2/$3 permanent;
  rewrite ^/(mule-management-console)/v/(3\.[234567])(?:|/(.*))$ https://docs.archive.mulesoft.com/$1/v/$2/$3 permanent;
  rewrite ^/(mule-user-guide)/v/(3\.[234])(?:|/(.*))$ https://docs.archive.mulesoft.com/$1/v/$2/$3 permanent;
  rewrite ^/(munit)/v/(1\.[012])(?:|/(.*))$ https://docs.archive.mulesoft.com/$1/v/$2/$3 permanent;
  
  # == Drop /v folder
  
  #rewrite ^(/[^/]+)/v(?:|/(.*))$ $1/$2 permanent;
  # NOTE using separate rules allows us to always add a trailing slash to the version
  rewrite ^(/[^/]+)/v/?$ $1/ permanent;
  rewrite ^(/[^/]+)/v/([^/]+)(?:|/(.*))$ $1/$2/$3 permanent;
}

# NOTE only map to legacy names once the /v/ folder has been removed
# QUESTION can we use ^~ for these matches?
# == Legacy space names and versioning schemes

location = /mule-user-guide/ { return 301 /mule-runtime/; }
location /mule-user-guide/ {
  rewrite ^/mule-user-guide/4\.\d(?:|/(.*))$ /mule4-runtime/latest/$1 permanent;
  rewrite ^/mule-user-guide/(.*)$ /mule-runtime/$1 permanent;
}

location = /mule4-user-guide/ { return 301 /mule4-runtime/; }
location /mule4-user-guide/ { rewrite ^/mule4-user-guide/(.*)$ /mule4-runtime/$1 permanent; }

location = /anypoint-studio/ { return 301 /studio/; }
location /anypoint-studio/ {
  rewrite ^/anypoint-studio/7/(.*)$ /studio/7.1/$1 permanent;
  rewrite ^/anypoint-studio/(.*)$ /studio/$1 permanent;
}

location = /anypoint-b2b/ { return 301 /partner-manager/; }
location /anypoint-b2b/ { rewrite ^/anypoint-b2b/(.*)$ /partner-manager/$1 permanent; }

location = /anypoint-connector-devkit/ { return 301 /connector-devkit/; }
location /anypoint-connector-devkit/ { rewrite ^/anypoint-connector-devkit/(.*)$ /connector-devkit/$1 permanent; }

location = /anypoint-data-gateway/ { return 301 /data-gateway/; }
location /anypoint-data-gateway/ { rewrite ^/anypoint-data-gateway/(?:1\.[134]\.[01](?:$|/))?(.*)$ /data-gateway/$1 permanent; }

location = /anypoint-exchange/ { return 301 /exchange/; }
location /anypoint-exchange/ { rewrite ^/anypoint-exchange/(.*)$ /exchange/$1 permanent; }

location = /anypoint-mq/ { return 301 /mq/; }
location /anypoint-mq/ { rewrite ^/anypoint-mq/(.*)$ /mq/$1 permanent; }

location = /anypoint-runtime-fabric/ { return 301 /runtime-fabric/; }
location /anypoint-runtime-fabric/ { rewrite ^/anypoint-runtime-fabric/(.*)$ /runtime-fabric/$1 permanent; }

location = /anypoint-platform-on-premises/ { return 301 /private-cloud/1.5/; }

location /anypoint-platform-for-apis/ { rewrite ^/anypoint-platform-for-apis/(.*)$ /api-manager/$1 permanent; }

location = /anypoint-private-cloud/ { return 301 /private-cloud/; }
location /anypoint-private-cloud/ { rewrite ^/anypoint-private-cloud/(.*)$ /private-cloud/$1 permanent; }

location = /design-center/1.0/ { return 301 /design-center/; }
location /design-center/1.0/ { rewrite ^/(design-center)/1\.0/(.*)$ /$1/$2 permanent; }

# TODO split these into non-regex rules
rewrite ^/private-cloud/(1\.\d)\.[01](?:|/(.*))$ /private-cloud/$1/$2 permanent;

location = /mule-healthcare-toolkit/ { return 301 /healthcare-toolkit/; }
location /mule-healthcare-toolkit/ { rewrite ^/mule-healthcare-toolkit/(.*)$ /healthcare-toolkit/$1 permanent; }

#location ^~ /mule-healthcare-toolkit/ {
#  rewrite ^/mule-healthcare-toolkit/3\.[567]/(.*)$ /healthcare-toolkit/2.0/$1 permanent;
#  rewrite ^/mule-healthcare-toolkit/3\.[34]/(.*)$ /healthcare-toolkit/1.3/$1 permanent;
#  rewrite ^/mule-healthcare-toolkit/(.*)$ /healthcare-toolkit/$1 permanent;
#}

# == Page aliases managed by Antora (TODO)

#include includes/rewrites-page-aliases.conf;

# == Page aliases not managed by Antora

# NOTE from this point forward, the first segment is always the new name (e.g., mule-runtime rather than mule-user-guide)
# IMPORTANT nested locations are terminal

location = /mule-runtime/3.8/mulesoft-enterprise-java-connector-for-sap-reference { return 301 https://mulesoft.github.io/sap-transport/; }
location = /mule-runtime/3.8/salesforce-connector-reference { return 301 http://mulesoft.github.io/salesforce-connector; }
location = /mule-runtime/3.7/oracle-e-business-suite-connector { return 301 https://mulesoft.github.io/oracle-ebs-connector/; }

location = /release-notes/servicenow-connector-5.0-release-notes { return 301 https://mulesoft.github.io/servicenow-wsdl-connector/; }

location = /studio/faq-jdk-requirement { return 301 /studio/6/faq-jdk-requirement; }
location = /studio/update-workspace { return 301 /studio/latest/update-workspace; }

location = /apikit/apikit-overview { return 301 /apikit/3.x/; }
location = /apikit/apikit-retrieve-raml-task { return 301 /apikit/3.x/apikit-retrieve-raml-37-task; }
rewrite ^/apikit/(?!\d\.)(.*)$ /apikit/3.x/$1 permanent;

location = /quickstarts/design-an-api { return 301 /general/getting-started/design-an-api; }
location = /quickstarts/implement-and-test { return 301 /general/getting-started/implement-and-test; }
location = /quickstarts/sync-api-apisync { return 301 /general/getting-started/sync-api-apisync; }

location = /anypoint-platform-administration/ { return 301 /access-management/; }
location = /anypoint-platform-administration/anypoint-platform-for-apis-administration { return 301 /access-management/; }
location = /anypoint-platform-administration/audit-logging { return 301 /access-management/audit-logging; }
location = /anypoint-platform-administration/manage-your-organization-and-business-groups { return 301 /access-management/organization; }
location = /anypoint-platform-administration/managing-accounts-roles-and-permissions { return 301 /access-management/managing-permissions; }
location = /anypoint-platform-administration/managing-cloudhub-specific-settings { return 301 /runtime-manager/managing-cloudhub-specific-settings; }
location = /anypoint-platform-administration/managing-cloudhub-environments { return 301 /access-management/environments; }
location = /anypoint-platform-administration/setting-up-external-identity { return 301 /access-management/external-identity; }
location = /anypoint-platform-administration/troubleshooting-anypoint-platform-access { return 301 /access-management/troubleshooting-anypoint-platform-access; }

location = /anypoint-platform-on-premises/1.0/installing-anypoint-on-premises-edition { return 301 /private-cloud/1.1/installing-anypoint-on-premises; }
location = /anypoint-platform-on-premises/1.5.0/ { return 301 /private-cloud/1.5/; }
location = /anypoint-platform-on-premises/1.5.0/backup-and-disaster-recovery { return 301 /private-cloud/1.5/backup-and-disaster-recovery; }
location = /anypoint-platform-on-premises/1.5.0/creating-load-balancer-onprem { return 301 /private-cloud/1.5/install-create-lb; }
location = /anypoint-platform-on-premises/1.5.0/installing-anypoint-on-premises { return 301 /private-cloud/1.5/install-workflow; }
location = /anypoint-platform-on-premises/1.5.0/managing-via-the-ops-center { return 301 /private-cloud/1.5/managing-via-the-ops-center; }
location = /anypoint-platform-on-premises/1.5.0/prerequisites-platform-on-premises { return 301 /private-cloud/1.5/system-requirements; }

# NOTE these could be page aliases
location = /exchange/ex2-migrate { return 301 /exchange/migrate; }
location = /exchange/ex2-graph-api { return 301 /exchange/to-search-with-graph-api; }

# NOTE this could be a page alias
location = /private-cloud/1.6/ext-analytics-elk { return 301 /private-cloud/1.7/ext-analytics-elk; }

location /analytics/ {
  location = /analytics/api-consumer-analytics { return 301 /api-manager/api-consumer-analytics; }
  location = /analytics/analytics-chart { return 301 /api-manager/analytics-chart; }
  location = /analytics/analytics-event-api { return 301 /api-manager/analytics-event-api; }
  location = /analytics/analytics-event-forward { return 301 /api-manager/analytics-event-forward; }
  location = /analytics/analytics-faq { return 301 /api-manager/analytics-faq; }
  location = /analytics/viewing-api-analytics { return 301 /api-manager/viewer-api-analytics; }
  return 301 /api-manager/analytics-concept;
}

location = /api-manager/2.x/api-auto-discovery-new-reference { return 301 /api-manager/2.x/configure-autodiscovery-4-task; }

# NOTE when parent location block is regex, all nested location blocks must be regex
location ~ ^/api-manager/(?!\d\.) {
  location ~ ^/api-manager/latest-overview-concept$ { return 301 /api-manager/2.x/latest-overview-concept; }
  location ~ ^/api-manager/latest-tasks$ { return 301 /api-manager/2.x/latest-tasks; }
  location ~ ^/api-manager/manage-exchange-api-task$ { return 301 /api-manager/2.x/manage-exchange-api-task; }
  location ~ ^/api-manager/import-api-task$ { return 301 /api-manager/2.x/import-api-task; }
  location ~ ^/api-manager/classify-api-task$ { return 301 /api-manager/2.x/classify-api-task; }
  location ~ ^/api-manager/switch-environment-task$ { return 301 /api-manager/2.x/switch-environment-task; }
  location ~ ^/api-manager/promote-api-task$ { return 301 /api-manager/2.x/promote-api-task; }
  location ~ ^/api-manager/download-proxy-task$ { return 301 /api-manager/2.x/download-proxy-task; }
  location ~ ^/api-manager/export-api-latest-task$ { return 301 /api-manager/2.x/export-api-latest-task; }
  location ~ ^/api-manager/create-instance-task$ { return 301 /api-manager/2.x/create-instance-task; }
  location ~ ^/api-manager/deprecate-api-latest-task$ { return 301 /api-manager/2.x/deprecate-api-latest-task; }
  location ~ ^/api-manager/delete-api-task$ { return 301 /api-manager/2.x/delete-api-task; }
  location ~ ^/api-manager/configure-api-task$ { return 301 /api-manager/2.x/configure-api-task; }
  location ~ ^/api-manager/manage-client-apps-latest-task$ { return 301 /api-manager/2.x/manage-client-apps-latest-task; }
  location ~ ^/api-manager/remove-client-app-latest-task$ { return 301 /api-manager/2.x/remove-client-app-latest-task; }
  location ~ ^/api-manager/access-client-app-id-task$ { return 301 /api-manager/2.x/access-client-app-id-task; }
  location ~ ^/api-manager/environments-concept$ { return 301 /api-manager/2.x/environments-concept; }
  location ~ ^/api-manager/environment-permission-task$ { return 301 /api-manager/2.x/environment-permission-task; }
  location ~ ^/api-manager/find-api-id-task$ { return 301 /api-manager/2.x/find-api-id-task; }
  location ~ ^/api-manager/manage-versions-instances-concept$ { return 301 /api-manager/2.x/manage-versions-instances-concept; }
  location ~ ^/api-manager/api-auto-discovery-new-concept$ { return 301 /api-manager/2.x/api-auto-discovery-new-concept; }
  location ~ ^/api-manager/configure-auto-discovery-new-task$ { return 301 /api-manager/2.x/configure-auto-discovery-new-task; }
  location ~ ^/api-manager/api-auto-discovery-new-reference$ { return 301 /api-manager/2.x/configure-autodiscovery-4-task; }
  location ~ ^/api-manager/proxy-latest-concept$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/wsdl-raml-http-proxy-reference$ { return 301 /api-manager/2.x/wsdl-raml-http-proxy-reference; }
  location ~ ^/api-manager/proxy-advantages$ { return 301 /api-manager/2.x/proxy-advantages; }
  location ~ ^/api-manager/proxy-deploy-cloudhub-latest-task$ { return 301 /api-manager/2.x/proxy-deploy-cloudhub-latest-task; }
  location ~ ^/api-manager/proxy-deploy-hybrid-latest-task$ { return 301 /api-manager/2.x/proxy-deploy-hybrid-latest-task; }
  location ~ ^/api-manager/classic-overview-concept$ { return 301 /api-manager/1.x/classic-overview-concept; }
  location ~ ^/api-manager/tutorials$ { return 301 /api-manager/1.x/tutorials; }
  location ~ ^/api-manager/tutorial-set-up-and-deploy-an-api-proxy$ { return 301 /api-manager/1.x/tutorial-set-up-and-deploy-an-api-proxy; }
  location ~ ^/api-manager/api-mgr-deploy-soap-proxy$ { return 301 /api-manager/1.x/api-mgr-deploy-soap-proxy; }
  location ~ ^/api-manager/create-api-version-task$ { return 301 /api-manager/1.x/create-api-version-task; }
  location ~ ^/api-manager/api-permissions$ { return 301 /api-manager/1.x/api-permissions; }
  location ~ ^/api-manager/import-api-version-task$ { return 301 /api-manager/1.x/import-api-version-task; }
  location ~ ^/api-manager/export-api-version-task$ { return 301 /api-manager/1.x/export-api-version-task; }
  location ~ ^/api-manager/tutorial-create-an-api-portal$ { return 301 /api-manager/1.x/tutorial-create-an-api-portal; }
  location ~ ^/api-manager/deprecate-api-task$ { return 301 /api-manager/1.x/deprecate-api-task; }
  location ~ ^/api-manager/tutorial-use-a-portal-as-an-app-developer$ { return 301 /api-manager/1.x/tutorial-use-a-portal-as-an-app-developer; }
  location ~ ^/api-manager/remove-client-app-task$ { return 301 /api-manager/1.x/remove-client-app-task; }
  location ~ ^/api-manager/access-client-id-secret-task$ { return 301 /api-manager/1.x/access-client-id-secret-task; }
  location ~ ^/api-manager/request-access-to-api-task$ { return 301 /api-manager/1.x/request-access-to-api-task; }
  location ~ ^/api-manager/manage-api-reference$ { return 301 /api-manager/1.x/manage-api-reference; }
  location ~ ^/api-manager/manage-versions-reference$ { return 301 /api-manager/1.x/manage-versions-reference; }
  location ~ ^/api-manager/browsing-and-accessing-apis$ { return 301 /api-manager/1.x/browsing-and-accessing-apis; }
  location ~ ^/api-manager/engaging-users-of-your-api$ { return 301 /api-manager/1.x/engaging-users-of-your-api; }
  location ~ ^/api-manager/api-auto-discovery$ { return 301 /api-manager/1.x/api-auto-discovery; }
  location ~ ^/api-manager/configure-auto-discovery-task$ { return 301 /api-manager/1.x/configure-auto-discovery-task; }
  location ~ ^/api-manager/api-auto-discovery-reference$ { return 301 /api-manager/1.x/api-auto-discovery-reference; }
  location ~ ^/api-manager/proxy-about$ { return 301 /api-manager/1.x/proxy-about; }
  location ~ ^/api-manager/proxy-depl-cloudhub$ { return 301 /api-manager/1.x/proxy-depl-cloudhub; }
  location ~ ^/api-manager/proxy-depl-hosted$ { return 301 /api-manager/1.x/proxy-depl-hosted; }
  location ~ ^/api-manager/proxy-modify$ { return 301 /api-manager/1.x/proxy-modify; }
  location ~ ^/api-manager/setting-up-an-api-proxy$ { return 301 /api-manager/1.x/setting-up-an-api-proxy; }
  location ~ ^/api-manager/july-configure-rest-proxy-task$ { return 301 /api-manager/1.x/july-configure-rest-proxy-task; }
  location ~ ^/api-manager/configuring-endpoint-reference$ { return 301 /api-manager/1.x/configuring-endpoint-reference; }
  location ~ ^/api-manager/https-reference$ { return 301 /api-manager/1.x/https-reference; }
  location ~ ^/api-manager/policies-4-concept$ { return 301 /api-manager/2.x/policies-4-concept; }
  location ~ ^/api-manager/policies-whats-new-concept$ { return 301 /api-manager/2.x/policies-whats-new-concept; }
  location ~ ^/api-manager/policy-scope-size-concept$ { return 301 /api-manager/2.x/policy-scope-size-concept; }
  location ~ ^/api-manager/cors-mule4$ { return 301 /api-manager/2.x/cors-mule4; }
  location ~ ^/api-manager/oauth2-policies-new$ { return 301 /api-manager/2.x/oauth2-policies-new; }
  location ~ ^/api-manager/oauth-policy-implementation-concept$ { return 301 /api-manager/2.x/oauth-policy-implementation-concept; }
  location ~ ^/api-manager/offline-policy-task$ { return 301 /api-manager/2.x/offline-policy-task; }
  location ~ ^/api-manager/offline-remove-task$ { return 301 /api-manager/2.x/offline-remove-task; }
  location ~ ^/api-manager/upload-policy-exchange-task$ { return 301 /api-manager/2.x/upload-policy-exchange-task; }
  location ~ ^/api-manager/mule4-policy-reference$ { return 301 /api-manager/2.x/mule4-policy-reference; }
  location ~ ^/api-manager/custom-policy-index-latest$ { return 301 /api-manager/2.x/custom-policy-index-latest; }
  location ~ ^/api-manager/http-policy-transform$ { return 301 /api-manager/2.x/http-policy-transform; }
  location ~ ^/api-manager/develop-custom-policies-reference$ { return 301 /api-manager/2.x/develop-custom-policies-reference; }
  location ~ ^/api-manager/custom-policy-4-reference$ { return 301 /api-manager/2.x/custom-policy-4-reference; }
  location ~ ^/api-manager/july-policy-tasks$ { return 301 /api-manager/1.x/july-policy-tasks; }
  location ~ ^/api-manager/setting-your-api-url$ { return 301 /api-manager/1.x/setting-your-api-url; }
  location ~ ^/api-manager/reorder-policies-task$ { return 301 /api-manager/1.x/reorder-policies-task; }
  location ~ ^/api-manager/tutorial-manage-consuming-applications$ { return 301 /api-manager/1.x/tutorial-manage-consuming-applications; }
  location ~ ^/api-manager/accessing-your-api-behind-a-firewall$ { return 301 /api-manager/1.x/accessing-your-api-behind-a-firewall; }
  location ~ ^/api-manager/policy-reference$ { return 301 /api-manager/1.x/policy-reference; }
  location ~ ^/api-manager/introduction-to-policy-management$ { return 301 /api-manager/1.x/introduction-to-policy-management; }
  location ~ ^/api-manager/applying-custom-policies$ { return 301 /api-manager/1.x/applying-custom-policies; }
  location ~ ^/api-manager/creating-a-policy-walkthrough$ { return 301 /api-manager/1.x/creating-a-policy-walkthrough; }
  location ~ ^/api-manager/create-policy-config-task$ { return 301 /api-manager/1.x/create-policy-config-task; }
  location ~ ^/api-manager/create-policy-definition-task$ { return 301 /api-manager/1.x/create-policy-definition-task; }
  location ~ ^/api-manager/add-custom-policy-task$ { return 301 /api-manager/1.x/add-custom-policy-task; }
  location ~ ^/api-manager/add-rlp-support-task$ { return 301 /api-manager/1.x/add-rlp-support-task; }
  location ~ ^/api-manager/custom-policy-reference$ { return 301 /api-manager/1.x/custom-policy-reference; }
  location ~ ^/api-manager/custom-pol-config-xml-props-reference$ { return 301 /api-manager/1.x/custom-pol-config-xml-props-reference; }
  location ~ ^/api-manager/pointcuts-reference$ { return 301 /api-manager/1.x/pointcuts-reference; }
  location ~ ^/api-manager/custom-pol-implementations-reference$ { return 301 /api-manager/1.x/custom-pol-implementations-reference; }
  location ~ ^/api-manager/cust-pol-exception-blocks-reference$ { return 301 /api-manager/1.x/cust-pol-exception-blocks-reference; }
  location ~ ^/api-manager/using-policies$ { return 301 /api-manager/2.x/using-policies; }
  location ~ ^/api-manager/tutorial-manage-an-api$ { return 301 /api-manager/2.x/tutorial-manage-an-api; }
  location ~ ^/api-manager/prepare-raml-task$ { return 301 /api-manager/2.x/prepare-raml-task; }
  location ~ ^/api-manager/delete-sla-tier-task$ { return 301 /api-manager/2.x/delete-sla-tier-task; }
  location ~ ^/api-manager/disable-edit-remove-task$ { return 301 /api-manager/2.x/disable-edit-remove-task; }
  location ~ ^/api-manager/configure-policy-polling-task$ { return 301 /api-manager/2.x/configure-policy-polling-task; }
  location ~ ^/api-manager/resource-level-policies-about$ { return 301 /api-manager/2.x/resource-level-policies-about; }
  location ~ ^/api-manager/resource-level-policy-reference$ { return 301 /api-manager/2.x/resource-level-policy-reference; }
  location ~ ^/api-manager/available-policies$ { return 301 /api-manager/2.x/available-policies; }
  location ~ ^/api-manager/add-remove-headers-concept$ { return 301 /api-manager/2.x/add-remove-headers-concept; }
  location ~ ^/api-manager/add-remove-headers-latest-task$ { return 301 /api-manager/2.x/add-remove-headers-latest-task; }
  location ~ ^/api-manager/add-remove-headers$ { return 301 /api-manager/2.x/add-remove-headers; }
  location ~ ^/api-manager/cors-policy$ { return 301 /api-manager/2.x/cors-policy; }
  location ~ ^/api-manager/avoid-restrictions-task$ { return 301 /api-manager/2.x/avoid-restrictions-task; }
  location ~ ^/api-manager/client-id-based-policies$ { return 301 /api-manager/2.x/client-id-based-policies; }
  location ~ ^/api-manager/basic-authentication-concept$ { return 301 /api-manager/2.x/basic-authentication-concept; }
  location ~ ^/api-manager/basic-authentication-simple-concept$ { return 301 /api-manager/2.x/basic-authentication-simple-concept; }
  location ~ ^/api-manager/basic-authentication-ldap-concept$ { return 301 /api-manager/2.x/basic-authentication-ldap-concept; }
  location ~ ^/api-manager/http-basic-authentication-policy$ { return 301 /api-manager/2.x/http-basic-authentication-policy; }
  location ~ ^/api-manager/ldap-security-manager$ { return 301 /api-manager/2.x/ldap-security-manager; }
  location ~ ^/api-manager/ip-blacklist$ { return 301 /api-manager/2.x/ip-blacklist; }
  location ~ ^/api-manager/ip-whitelist$ { return 301 /api-manager/2.x/ip-whitelist; }
  location ~ ^/api-manager/json-xml-threat-policy$ { return 301 /api-manager/2.x/json-xml-threat-policy; }
  location ~ ^/api-manager/apply-configure-json-threat-task$ { return 301 /api-manager/2.x/apply-configure-json-threat-task; }
  location ~ ^/api-manager/apply-configure-xml-threat-task$ { return 301 /api-manager/2.x/apply-configure-xml-threat-task; }
  location ~ ^/api-manager/external-oauth-2\.0-token-validation-policy$ { return 301 /api-manager/2.x/external-oauth-2.0-token-validation-policy; }
  location ~ ^/api-manager/openam-oauth-token-enforcement-policy$ { return 301 /api-manager/2.x/openam-oauth-token-enforcement-policy; }
  location ~ ^/api-manager/apply-oauth-token-policy-task$ { return 301 /api-manager/2.x/apply-oauth-token-policy-task; }
  location ~ ^/api-manager/configure-oauth-proxy-task$ { return 301 /api-manager/2.x/configure-oauth-proxy-task; }
  location ~ ^/api-manager/aes-oauth-faq$ { return 301 /api-manager/2.x/aes-oauth-faq; }
  location ~ ^/api-manager/oauth-build-provider-prerequisites-about$ { return 301 /api-manager/2.x/oauth-build-provider-prerequisites-about; }
  location ~ ^/api-manager/building-an-external-oauth-2\.0-provider-application$ { return 301 /api-manager/2.x/building-an-external-oauth-2.0-provider-application; }
  location ~ ^/api-manager/to-test-local-provider$ { return 301 /api-manager/2.x/to-test-local-provider; }
  location ~ ^/api-manager/to-deploy-provider$ { return 301 /api-manager/2.x/to-deploy-provider; }
  location ~ ^/api-manager/to-test-remote-provider$ { return 301 /api-manager/2.x/to-test-remote-provider; }
  location ~ ^/api-manager/to-configure-provider-multiple-workers$ { return 301 /api-manager/2.x/to-configure-provider-multiple-workers; }
  location ~ ^/api-manager/to-use-authentication$ { return 301 /api-manager/2.x/to-use-authentication; }
  location ~ ^/api-manager/oauth-dance-about$ { return 301 /api-manager/2.x/oauth-dance-about; }
  location ~ ^/api-manager/about-configure-api-for-oauth$ { return 301 /api-manager/2.x/about-configure-api-for-oauth; }
  location ~ ^/api-manager/oauth-service-provider-reference$ { return 301 /api-manager/2.x/oauth-service-provider-reference; }
  location ~ ^/api-manager/oauth-grant-types-about$ { return 301 /api-manager/2.x/oauth-grant-types-about; }
  location ~ ^/api-manager/oauth-persist-obj-store-about$ { return 301 /api-manager/2.x/oauth-persist-obj-store-about; }
  location ~ ^/api-manager/oauth2-provider-configuration$ { return 301 /api-manager/2.x/oauth2-provider-configuration; }
  location ~ ^/api-manager/spike-control-reference$ { return 301 /api-manager/2.x/spike-control-reference; }
  location ~ ^/api-manager/throttling-rate-limit-concept$ { return 301 /api-manager/2.x/throttling-rate-limit-concept; }
  location ~ ^/api-manager/rate-limiting-and-throttling-sla-based-policies$ { return 301 /api-manager/2.x/rate-limiting-and-throttling-sla-based-policies; }
  location ~ ^/api-manager/configure-rate-limiting-task$ { return 301 /api-manager/2.x/configure-rate-limiting-task; }
  location ~ ^/api-manager/rate-limiting-and-throttling$ { return 301 /api-manager/2.x/rate-limiting-and-throttling; }
  location ~ ^/api-manager/cors-reference$ { return 301 /api-manager/2.x/cors-reference; }
  location ~ ^/api-manager/defining-sla-tiers$ { return 301 /api-manager/2.x/defining-sla-tiers; }
  location ~ ^/api-manager/using-api-alerts$ { return 301 /api-manager/2.x/using-api-alerts; }
  location ~ ^/api-manager/add-api-alert-task$ { return 301 /api-manager/2.x/add-api-alert-task; }
  location ~ ^/api-manager/test-alert-task$ { return 301 /api-manager/2.x/test-alert-task; }
  location ~ ^/api-manager/view-delete-alerts-task$ { return 301 /api-manager/2.x/view-delete-alerts-task; }
  location ~ ^/api-manager/edit-enable-disable-alerts-task$ { return 301 /api-manager/2.x/edit-enable-disable-alerts-task; }
  location ~ ^/api-manager/gatekeeper$ { return 301 /api-manager/2.x/gatekeeper; }
  location ~ ^/api-manager/gatekeeper-task$ { return 301 /api-manager/2.x/gatekeeper-task; }
  location ~ ^/api-manager/api-manager-designer-archive$ { return 301 /api-manager/1.x/api-manager-designer-archive; }
  location ~ ^/api-manager/tutorial-set-up-an-api$ { return 301 /api-manager/1.x/tutorial-set-up-an-api; }
  location ~ ^/api-manager/design-raml-api-task$ { return 301 /api-manager/1.x/design-raml-api-task; }
  location ~ ^/api-manager/simulate-api-task$ { return 301 /api-manager/1.x/simulate-api-task; }
  location ~ ^/api-manager/consume-api-task$ { return 301 /api-manager/1.x/consume-api-task; }
  location ~ ^/api-manager/tutorial-design-an-api$ { return 301 /api-manager/1.x/tutorial-design-an-api; }
  location ~ ^/api-manager/designing-your-api$ { return 301 /api-manager/1.x/designing-your-api; }
  location ~ ^/api-manager/api-notebook-concept$ { return 301 /api-manager/1.x/api-notebook-concept; }
  location ~ ^/api-manager/tutorial-create-an-api-notebook$ { return 301 /api-manager/1.x/tutorial-create-an-api-notebook; }
  location ~ ^/api-manager/play-share-api-notebook-task$ { return 301 /api-manager/1.x/play-share-api-notebook-task; }
  location ~ ^/api-manager/creating-an-api-notebook$ { return 301 /api-manager/1.x/creating-an-api-notebook; }
  location ~ ^/api-manager/analytics-concept$ { return 301 /api-manager/2.x/analytics-concept; }
  location ~ ^/api-manager/viewing-api-analytics$ { return 301 /api-manager/2.x/viewing-api-analytics; }
  location ~ ^/api-manager/analytics-event-api$ { return 301 /api-manager/2.x/analytics-event-api; }
  location ~ ^/api-manager/analytics-chart$ { return 301 /api-manager/2.x/analytics-chart; }
  location ~ ^/api-manager/api-consumer-analytics$ { return 301 /api-manager/1.x/api-consumer-analytics; }
  location ~ ^/api-manager/analytics-event-forward$ { return 301 /api-manager/2.x/analytics-event-forward; }
  location ~ ^/api-manager/api-gateway-runtime-archive$ { return 301 /api-manager/1.x/api-gateway-runtime-archive; }
  location ~ ^/api-manager/configuring-an-api-gateway$ { return 301 /api-manager/1.x/configuring-an-api-gateway; }
  location ~ ^/api-manager/api-gateway-domain$ { return 301 /api-manager/1.x/api-gateway-domain; }
  location ~ ^/api-manager/proxy-depl-api-gate$ { return 301 /api-manager/1.x/proxy-depl-api-gate; }
  location ~ ^/api-manager/configuring-proxy-access-to-an-api$ { return 301 /api-manager/1.x/configuring-proxy-access-to-an-api; }
  location ~ ^/api-manager/deploy-to-api-gateway-runtime$ { return 301 /api-manager/1.x/deploy-to-api-gateway-runtime; }
  location ~ ^/api-manager/configure-endpoint-task$ { return 301 /api-manager/1.x/configure-endpoint-task; }
  location ~ ^/api-manager/configure-wsdl-proxy-task$ { return 301 /api-manager/2.x/workflow-download-configure-4-proxy; }
  location ~ ^/api-manager/rate-limit-multiple-workers-task$ { return 301 /api-manager/2.x/rate-limiting-and-throttling; }
  location ~ ^/api-manager/regenerate-jar-task$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/download-4-proxy-task$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/workflow-download-configure-4-proxy$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/setup-api-task$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/configure-auto-discovery-proxy-task$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/proxy-3-nov-concept$ { return 301 /api-manager/2.x/proxy-latest-concept; }
  location ~ ^/api-manager/creating-your-api-in-anypoint-platform$ { return 301 /api-manager/1.x/create-api-version-task; }
  return 301 /api-manager/2.x/;
}

# NOTE these could be page aliases
# FIXME rewrite as exact locations
rewrite ^/connectors/(?:salesforce-about|salesforce-to-work-with-topics|salesforce-to-work-with-streaming-channels|salesforce-to-receive-custom-events|salesforce-about-date-calendar-object-storage|salesforce-to-create-bulk-objects|salesforce-to-create-consumer-key|salesforce-to-generate-keystore-file|salesforce-about-apex-settings|salesforce-about-authentication|salesforce-about-proxy-settings|salesforce-about-threads-concurrency|salesforce-about-salesforce-apis|salesforce-tips|salesforce-xml-ref) /connectors/salesforce-connector permanent;
rewrite ^/connectors/(?:salesforce-connector-tech-ref|salesforce-connector-reference-v910) /connectors/salesforce-connector-reference permanent;

# NOTE these could be page aliases
location = /design-center/designing-api-about { return 301 /design-center/design-create-publish-api-specs; }
location = /design-center/group-resource-v-task { return 301 /design-center/design-create-publish-api-specs; }
location = /design-center/group-resource-task { return 301 /design-center/design-create-publish-api-specs; }
location = /design-center/publish-project-exchange-task { return 301 /design-center/design-create-publish-api-specs; }
location = /design-center/design-api-ui-reference { return 301 /design-center/design-create-publish-api-specs; }
location = /design-center/design-api-v-concept { return 301 /design-center/design-create-publish-api-visual-editor; }
location = /design-center/design-raml-api-v-task { return 301 /design-center/design-create-publish-api-visual-editor; }
location = /design-center/design-data-type-v-task { return 301 /design-center/design-create-publish-api-visual-editor; }
location = /design-center/design-resource-v-task { return 301 /design-center/design-create-publish-api-visual-editor; }
location = /design-center/exit-visual-edit-task { return 301 /design-center/design-create-publish-api-visual-editor; }
location = /design-center/design-api-basics-tasks { return 301 /design-center/design-create-publish-api-raml-editor; }
location = /design-center/design-raml-api-task { return 301 /design-center/design-create-publish-api-raml-editor; }
location = /design-center/design-api-key-tasks { return 301 /design-center/design-create-publish-api-raml-editor; }
location = /design-center/add-dependencies-task { return 301 /design-center/design-create-publish-api-raml-editor; }
location = /design-center/design-update-remove-dep-task { return 301 /design-center/design-create-publish-api-raml-editor; }
location = /design-center/export-api { return 301 /design-center/design-export-files; }
location = /design-center/design-manage-revisions-task { return 301 /design-center/design-branching; }
location = /design-center/design-branch-filelock-concept { return 301 /design-center/design-branching; }
location = /design-center/publish-and-test-v-task { return 301 /design-center/design-mocking-service; }
location = /design-center/simulate-api-task { return 301 /design-center/design-mocking-service; }
location = /design-center/mocking-reference { return 301 /design-center/design-mocking-service; }
location = /design-center/create-reuse-part-task { return 301 /design-center/design-create-publish-api-fragment; }
location = /design-center/design-api-frag-revisions-concept { return 301 /design-center/design-create-publish-api-fragment; }
location = /design-center/design-import-oas-task { return 301 /design-center/design-import-files; }
location = /design-center/design-import-raml-task { return 301 /design-center/design-import-files; }
location = /design-center/designing-api-reference { return 301 /design-center/design-import-files; }

location /mule-agent/ {
  location = /mule-agent/1.5/configuring-a-proxy-for-the-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.5/installing-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.5/installing-and-configuring-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.5/mule-agent-architecture { return 301 /runtime-manager/mule-agent-architecture; }
  location = /mule-agent/1.5/mule-agent-api { return 301 /runtime-manager/mule-agent-api; }
  location = /mule-agent/1.5/administration-service { return 301 /runtime-manager/administration-service; }
  location = /mule-agent/1.5/managing-applications-and-domains { return 301 /runtime-manager/managing-applications-and-domains; }
  location = /mule-agent/1.5/jmx-service { return 301 /runtime-manager/jmx-service; }
  location = /mule-agent/1.5/mule-agent-notifications { return 301 /runtime-manager/mule-agent-notifications; }
  location = /mule-agent/1.5/event-tracking { return 301 /runtime-manager/event-tracking; }
  location = /mule-agent/1.5/internal-handler-buffering { return 301 /runtime-manager/internal-handler-buffering; }
  location = /mule-agent/1.5/extending-the-mule-agent { return 301 /runtime-manager/extending-the-mule-agent; }
  location = /mule-agent/1.4.0/installing-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.4.0/mule-agent-architecture { return 301 /runtime-manager/mule-agent-architecture; }
  location = /mule-agent/1.4.0/administration-service { return 301 /runtime-manager/administration-service; }
  location = /mule-agent/1.4.0/managing-applications-and-domains { return 301 /runtime-manager/managing-applications-and-domains; }
  location = /mule-agent/1.4.0/event-tracking { return 301 /runtime-manager/event-tracking; }
  location = /mule-agent/1.4.0/jmx-service { return 301 /runtime-manager/jmx-service; }
  location = /mule-agent/1.4.0/mule-agent-notifications { return 301 /runtime-manager/mule-agent-notifications; }
  location = /mule-agent/1.4.0/extending-the-mule-agent { return 301 /runtime-manager/extending-the-mule-agent; }
  location = /mule-agent/1.4.0/internal-handler-buffering { return 301 /runtime-manager/internal-handler-buffering; }
  location = /mule-agent/1.4.0/configuring-a-proxy-for-the-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.3.0/installing-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.3.0/mule-agent-architecture { return 301 /runtime-manager/mule-agent-architecture; }
  location = /mule-agent/1.3.0/administration-service { return 301 /runtime-manager/administration-service; }
  location = /mule-agent/1.3.0/managing-applications-and-domains { return 301 /runtime-manager/managing-applications-and-domains; }
  location = /mule-agent/1.3.0/event-tracking { return 301 /runtime-manager/event-tracking; }
  location = /mule-agent/1.3.0/jmx-service { return 301 /runtime-manager/jmx-service; }
  location = /mule-agent/1.3.0/mule-agent-notifications { return 301 /runtime-manager/mule-agent-notifications; }
  location = /mule-agent/1.3.0/extending-the-mule-agent { return 301 /runtime-manager/extending-the-mule-agent; }
  location = /mule-agent/1.3.0/internal-handler-buffering { return 301 /runtime-manager/internal-handler-buffering; }
  location = /mule-agent/1.3.0/configuring-a-proxy-for-the-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.2.0/installing-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.2.0/mule-agent-architecture { return 301 /runtime-manager/mule-agent-architecture; }
  location = /mule-agent/1.2.0/administration-service { return 301 /runtime-manager/administration-service; }
  location = /mule-agent/1.2.0/managing-applications-and-domains { return 301 /runtime-manager/managing-applications-and-domains; }
  location = /mule-agent/1.2.0/event-tracking { return 301 /runtime-manager/event-tracking; }
  location = /mule-agent/1.2.0/jmx-service { return 301 /runtime-manager/jmx-service; }
  location = /mule-agent/1.2.0/mule-agent-notifications { return 301 /runtime-manager/mule-agent-notifications; }
  location = /mule-agent/1.2.0/extending-the-mule-agent { return 301 /runtime-manager/extending-the-mule-agent; }
  location = /mule-agent/1.2.0/internal-handler-buffering { return 301 /runtime-manager/internal-handler-buffering; }
  location = /mule-agent/1.2.0/configuring-a-proxy-for-the-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.1.1/installing-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  location = /mule-agent/1.1.1/mule-agent-architecture { return 301 /runtime-manager/mule-agent-architecture; }
  location = /mule-agent/1.1.1/administration-service { return 301 /runtime-manager/administration-service; }
  location = /mule-agent/1.1.1/managing-applications-and-domains { return 301 /runtime-manager/managing-applications-and-domains; }
  location = /mule-agent/1.1.1/event-tracking { return 301 /runtime-manager/event-tracking; }
  location = /mule-agent/1.1.1/jmx-service { return 301 /runtime-manager/jmx-service; }
  location = /mule-agent/1.1.1/mule-agent-notifications { return 301 /runtime-manager/mule-agent-notifications; }
  location = /mule-agent/1.1.1/extending-the-mule-agent { return 301 /runtime-manager/extending-the-mule-agent; }
  location = /mule-agent/1.1.1/internal-handler-buffering { return 301 /runtime-manager/internal-handler-buffering; }
  location = /mule-agent/1.1.1/configuring-a-proxy-for-the-mule-agent { return 301 /runtime-manager/installing-and-configuration-runtime-manager-agent; }
  return 301 /runtime-manager/mule-agent;
}

location /mule-fundamentals/ {
  location = /mule-fundamentals/3.8/anypoint-connector-tutorial { return 301 /general/getting-started/anypoint-connector; }
  location = /mule-fundamentals/3.8/anypoint-studio-essentials { return 301 /studio/6/; }
  location = /mule-fundamentals/3.8/basic-studio-tutorial { return 301 /studio/6/basic-studio-tutorial; }
  location = /mule-fundamentals/3.8/begin-with-the-basics { return 301 /mule-runtime/3.8/; }
  location = /mule-fundamentals/3.8/build-a-hello-world-application { return 301 /general/getting-started/build-a-hello-world-application; }
  location = /mule-fundamentals/3.8/content-based-routing-tutorial { return 301 /general/getting-started/content-based-routing; }
  location = /mule-fundamentals/3.8/deploying-mule-applications { return 301 /mule-runtime/3.8/deploying; }
  location = /mule-fundamentals/3.8/download-and-launch-anypoint-studio { return 301 /studio/6/download-and-launch-anypoint-studio; }
  location = /mule-fundamentals/3.8/elements-in-a-mule-flow { return 301 /mule-runtime/3.8/elements-in-a-mule-flow; }
  location = /mule-fundamentals/3.8/extending-mule { return 301 /mule-runtime/3.8/extending-mule; }
  location = /mule-fundamentals/3.8/first-30-minutes-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.8/first-day-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.8/first-week-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.8/flow-architecture-advanced-use-case { return 301 /mule-runtime/3.8/flow-architecture-advanced-use-case; }
  location = /mule-fundamentals/3.8/flows-and-subflows { return 301 /mule-runtime/3.8/flows-and-subflows; }
  location = /mule-fundamentals/3.8/global-elements { return 301 /mule-runtime/3.8/global-elements; }
  location = /mule-fundamentals/3.8/keyboard-shortcuts-in-studio { return 301 /studio/6/keyboard-shortcuts-in-studio; }
  location = /mule-fundamentals/3.8/message-state { return 301 /mule-runtime/3.8/message-state; }
  location = /mule-fundamentals/3.8/mule-application-architecture { return 301 /mule-runtime/3.8/mule-application-architecture; }
  location = /mule-fundamentals/3.8/mule-components { return 301 /mule-runtime/3.8/mule-components; }
  location = /mule-fundamentals/3.8/mule-concepts { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.8/mule-connectors { return 301 /mule-runtime/3.8/anypoint-connectors; }
  location = /mule-fundamentals/3.8/mule-exception-strategies { return 301 /mule-runtime/3.8/mule-exception-strategies; }
  location = /mule-fundamentals/3.8/mule-filters-scopes-and-routers { return 301 /mule-runtime/3.8/mule-filters-scopes-and-routers; }
  location = /mule-fundamentals/3.8/mule-message-structure { return 301 /mule-runtime/3.8/mule-message-structure; }
  location = /mule-fundamentals/3.8/mule-security { return 301 /mule-runtime/3.8/mule-security; }
  location = /mule-fundamentals/3.8/mule-transformers { return 301 /mule-runtime/3.8/mule-transformers; }
  location = /mule-fundamentals/3.8/quickstarts/mule-message-tutorial { return 301 /general/getting-started/mule-message; }
  location = /mule-fundamentals/3.8/setting-up-your-development-environment { return 301 /studio/6/setting-up-your-development-environment; }
  location = /mule-fundamentals/3.8/understanding-orchestration-using-mule { return 301 /mule-runtime/3.8/understanding-orchestration-using-mule; }
  location = /mule-fundamentals/3.7/anypoint-connector-tutorial { return 301 /general/getting-started/anypoint-connector; }
  location = /mule-fundamentals/3.7/anypoint-studio-essentials { return 301 /studio/5/; }
  location = /mule-fundamentals/3.7/basic-studio-tutorial { return 301 /studio/5/basic-studio-tutorial; }
  location = /mule-fundamentals/3.7/begin-with-the-basics { return 301 /mule-runtime/3.8/; }
  location = /mule-fundamentals/3.7/build-a-hello-world-application { return 301 /mule-runtime/3.7/build-a-hello-world-application; }
  location = /mule-fundamentals/3.7/content-based-routing-tutorial { return 301 /general/getting-started/content-based-routing; }
  location = /mule-fundamentals/3.7/deploying-mule-applications { return 301 /mule-runtime/3.8/deploying; }
  location = /mule-fundamentals/3.7/elements-in-a-mule-flow { return 301 /mule-runtime/3.7/elements-in-a-mule-flow; }
  location = /mule-fundamentals/3.7/extending-mule { return 301 /mule-runtime/3.7/extending-mule; }
  location = /mule-fundamentals/3.7/first-30-minutes-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.7/first-day-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.7/first-week-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.7/flow-architecture-advanced-use-case { return 301 /mule-runtime/3.7/flow-architecture-advanced-use-case; }
  location = /mule-fundamentals/3.7/flows-and-subflows { return 301 /mule-runtime/3.7/flows-and-subflows; }
  location = /mule-fundamentals/3.7/global-elements { return 301 /mule-runtime/3.7/global-elements; }
  location = /mule-fundamentals/3.7/keyboard-shortcuts-in-studio { return 301 /studio/5/keyboard-shortcuts-in-studio; }
  location = /mule-fundamentals/3.7/message-state { return 301 /mule-runtime/3.7/message-state; }
  location = /mule-fundamentals/3.7/mule-application-architecture { return 301 /mule-runtime/3.7/mule-application-architecture; }
  location = /mule-fundamentals/3.7/mule-components { return 301 /mule-runtime/3.7/mule-components; }
  location = /mule-fundamentals/3.7/mule-concepts { return 301 /mule-runtime/3.7/mule-concepts; }
  location = /mule-fundamentals/3.7/mule-connectors { return 301 /mule-runtime/3.7/anypoint-connectors; }
  location = /mule-fundamentals/3.7/mule-exception-strategies { return 301 /mule-runtime/3.7/mule-exception-strategies; }
  location = /mule-fundamentals/3.7/mule-filters-scopes-and-routers { return 301 /mule-runtime/3.7/mule-filters-scopes-and-routers; }
  location = /mule-fundamentals/3.7/mule-message-structure { return 301 /mule-runtime/3.7/mule-message-structure; }
  location = /mule-fundamentals/3.7/mule-message-tutorial { return 301 /general/getting-started/mule-message; }
  location = /mule-fundamentals/3.7/mule-security { return 301 /mule-runtime/3.7/mule-security; }
  location = /mule-fundamentals/3.7/mule-transformers { return 301 /mule-runtime/3.7/mule-transformers; }
  location = /mule-fundamentals/3.7/setting-up-your-development-environment { return 301 /studio/5/setting-up-your-development-environment; }
  location = /mule-fundamentals/3.7/understanding-orchestration-using-mule { return 301 /mule-runtime/3.8/understanding-orchestration-using-mule; }
  location = /mule-fundamentals/3.6/anypoint-connector-tutorial { return 301 /general/getting-started/anypoint-connector; }
  location = /mule-fundamentals/3.6/anypoint-studio-essentials { return 301 /studio/5/anypoint-studio-essentials; }
  location = /mule-fundamentals/3.6/basic-studio-tutorial { return 301 /studio/5/basic-studio-tutorial; }
  location = /mule-fundamentals/3.6/begin-with-the-basics { return 301 /mule-runtime/3.8/; }
  location = /mule-fundamentals/3.6/build-a-hello-world-application { return 301 /mule-runtime/3.6/build-a-hello-world-application; }
  location = /mule-fundamentals/3.6/content-based-routing-tutorial { return 301 /general/getting-started/content-based-routing; }
  location = /mule-fundamentals/3.6/deploying-mule-applications { return 301 /mule-runtime/3.8/deploying; }
  location = /mule-fundamentals/3.6/elements-in-a-mule-flow { return 301 /mule-runtime/3.6/elements-in-a-mule-flow; }
  location = /mule-fundamentals/3.6/extending-mule { return 301 /mule-runtime/3.6/extending-mule; }
  location = /mule-fundamentals/3.6/first-30-minutes-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.6/first-day-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.6/first-week-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.6/flow-architecture-advanced-use-case { return 301 /mule-runtime/3.6/flow-architecture-advanced-use-case; }
  location = /mule-fundamentals/3.6/flows-and-subflows { return 301 /mule-runtime/3.6/flows-and-subflows; }
  location = /mule-fundamentals/3.6/global-elements { return 301 /mule-runtime/3.6/global-elements; }
  location = /mule-fundamentals/3.6/keyboard-shortcuts-in-studio { return 301 /studio/5/keyboard-shortcuts-in-studio; }
  location = /mule-fundamentals/3.6/message-state { return 301 /mule-runtime/3.6/message-state; }
  location = /mule-fundamentals/3.6/mule-application-architecture { return 301 /mule-runtime/3.6/mule-application-architecture; }
  location = /mule-fundamentals/3.6/mule-components { return 301 /mule-runtime/3.6/mule-components; }
  location = /mule-fundamentals/3.6/mule-concepts { return 301 /mule-runtime/3.6/mule-concepts; }
  location = /mule-fundamentals/3.6/mule-connectors { return 301 /mule-runtime/3.6/anypoint-connectors; }
  location = /mule-fundamentals/3.6/mule-exception-strategies { return 301 /mule-runtime/3.6/mule-exception-strategies; }
  location = /mule-fundamentals/3.6/mule-filters-scopes-and-routers { return 301 /mule-runtime/3.6/mule-filters-scopes-and-routers; }
  location = /mule-fundamentals/3.6/mule-message-structure { return 301 /mule-runtime/3.6/mule-message-structure; }
  location = /mule-fundamentals/3.6/mule-message-tutorial { return 301 /general/getting-started/mule-message; }
  location = /mule-fundamentals/3.6/mule-security { return 301 /mule-runtime/3.6/mule-security; }
  location = /mule-fundamentals/3.6/mule-transformers { return 301 /mule-runtime/3.6/mule-transformers; }
  location = /mule-fundamentals/3.6/understanding-orchestration-using-mule { return 301 /mule-runtime/3.8/understanding-orchestration-using-mule; }
  location = /mule-fundamentals/3.5/anypoint-connector-tutorial { return 301 /general/getting-started/anypoint-connector; }
  location = /mule-fundamentals/3.5/anypoint-studio-essentials { return 301 /studio/5/anypoint-studio-essentials; }
  location = /mule-fundamentals/3.5/basic-studio-tutorial { return 301 /studio/5/basic-studio-tutorial; }
  location = /mule-fundamentals/3.5/begin-with-the-basics { return 301 /mule-runtime/3.8/; }
  location = /mule-fundamentals/3.5/build-a-hello-world-application { return 301 /mule-runtime/3.5/build-a-hello-world-application; }
  location = /mule-fundamentals/3.5/content-based-routing-tutorial { return 301 /general/getting-started/content-based-routing; }
  location = /mule-fundamentals/3.5/deploying-mule-applications { return 301 /mule-runtime/3.8/deploying; }
  location = /mule-fundamentals/3.5/elements-in-a-mule-flow { return 301 /mule-runtime/3.5/elements-in-a-mule-flow; }
  location = /mule-fundamentals/3.5/extending-mule { return 301 /mule-runtime/3.5/extending-mule; }
  location = /mule-fundamentals/3.5/first-30-minutes-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.5/first-day-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.5/first-week-with-mule { return 301 /mule-runtime/3.8/mule-concepts; }
  location = /mule-fundamentals/3.5/flow-architecture-advanced-use-case { return 301 /mule-runtime/3.5/flow-architecture-advanced-use-case; }
  location = /mule-fundamentals/3.5/flows-and-subflows { return 301 /mule-runtime/3.5/flows-and-subflows; }
  location = /mule-fundamentals/3.5/global-elements { return 301 /mule-runtime/3.5/global-elements; }
  location = /mule-fundamentals/3.5/keyboard-shortcuts-in-studio { return 301 /studio/5/keyboard-shortcuts-in-studio; }
  location = /mule-fundamentals/3.5/message-state { return 301 /mule-runtime/3.5/message-state; }
  location = /mule-fundamentals/3.5/mule-application-architecture { return 301 /mule-runtime/3.5/mule-application-architecture; }
  location = /mule-fundamentals/3.5/mule-components { return 301 /mule-runtime/3.5/mule-components; }
  location = /mule-fundamentals/3.5/mule-concepts { return 301 /mule-runtime/3.5/mule-concepts; }
  location = /mule-fundamentals/3.5/mule-connectors { return 301 /mule-runtime/3.5/anypoint-connectors; }
  location = /mule-fundamentals/3.5/mule-exception-strategies { return 301 /mule-runtime/3.5/mule-exception-strategies; }
  location = /mule-fundamentals/3.5/mule-filters-scopes-and-routers { return 301 /mule-runtime/3.5/mule-filters-scopes-and-routers; }
  location = /mule-fundamentals/3.5/mule-message-structure { return 301 /mule-runtime/3.5/mule-message-structure; }
  location = /mule-fundamentals/3.5/mule-security { return 301 /mule-runtime/3.5/mule-security; }
  location = /mule-fundamentals/3.5/mule-transformers { return 301 /mule-runtime/3.5/mule-transformers; }
  location = /mule-fundamentals/3.5/understanding-orchestration-using-mule { return 301 /mule-runtime/3.8/understanding-orchestration-using-mule; }
  return 301 /general/getting-started/;
}

# == Legacy wiki locations

#include includes/rewrites-legacy.conf;
